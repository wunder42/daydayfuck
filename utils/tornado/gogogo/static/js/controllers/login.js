// Generated by CoffeeScript 1.6.3
(function() {
  'use strict';
  define([], function() {
    var LoginController;
    LoginController = function($scope, $http, $location) {
      var getcookie;
      $scope.user = {
        username: '',
        password: ''
      };
      $scope.requestLogin = function() {
        return $http.post('/u/login', {
          username: $scope.user.username,
          password: $scope.user.password,
          _xsrf: getcookie('_xsrf')
        }).success(function(data, status, headers, config) {
          console.log('success login post');
          $scope.user.username = '';
          $scope.user.password = '';
          if (data.status === 'OK') {
            return window.location.href = '/#/tasks';
          }
        }).error(function(data, status, headers, config) {
          return console.log('error');
        });
      };
      $http.get('/u/login').success(function(data, status, headers, config) {
        console.log('success login get', data);
        if (data.status === 'OK') {
          return window.location.href = '/#/tasks';
        }
      });
      return getcookie = function(name) {
        var r;
        r = document.cookie.match("\\b" + name + "=([^;]*)\\b");
        if (r) {
          return r[1];
        } else {
          return null;
        }
      };
    };
    return LoginController;
  });

}).call(this);
