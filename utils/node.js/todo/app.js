// Generated by CoffeeScript 1.6.3
(function() {
  var app, express, io, path, server,
    _this = this;

  express = require('express');

  path = require('path');

  app = express();

  server = (require('http')).createServer(app);

  io = (require('socket.io')).listen(server);

  app.set('views', path.join(__dirname, 'views'));

  app.set('view engine', 'jade');

  app.use(express["static"](path.join(__dirname, 'public')));

  app.use(require('connect-assets')());

  app.get('/', function(req, res) {
    return res.render('index');
  });

  this.todos = {};

  io.sockets.on('connection', function(socket) {
    var _base;
    console.log('connected...');
    socket.on('joinList', function(list) {
      return console.log("join list " + list);
    });
    socket.list = list;
    socket.join(list);
    if ((_base = _this.todos)[list] == null) {
      _base[list] = [];
    }
    return socket.emit('syncItems', _this.todos[list]);
  });

  server.listen(8989);

}).call(this);
