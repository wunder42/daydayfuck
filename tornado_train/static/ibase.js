// Generated by CoffeeScript 1.6.3
(function() {
  var $, getcookie;

  $ = jQuery;

  $("#note-add").click(function() {
    return $("#note-add-dialog").fadeIn("fast");
  });

  $("#note-add-cancel").click(function(e) {
    $("#note-add-content").val("");
    $("#note-add-dialog").fadeOut("slow");
    return e.preventDefault();
  });

  getcookie = function(name) {
    var r;
    r = document.cookie.match("\\b" + name + "=([^;]*)\\b");
    return r ? r[1] : undefined;
  };

  $("#note-add-submit").click(function(e) {
    var args;
    e.preventDefault();
    args = {
      "_xsrf": getcookie("_xsrf"),
      "content": $("#note-add-content").val()
    };
    return $.post('/n/add', args, function(data, textStatus, xhr) {
      $("#note-add-cancel").click();
      data = jQuery.parseJSON(data);
      console.log($.type(data), textStatus);
      if(data.status) {
        $(".mCSB_container").delay(1).prepend('<div class="delta inote"><div class="msg"><a href="#">' + data.content + '</a></div></div>');
        return $(".ilists").mCustomScrollbar("scrollTo", "top");
      }
    });
  });

  $(".ilists").mCustomScrollbar({
    verticalScroll: true
  });

}).call(this);
